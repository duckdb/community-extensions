extension:
  name: boilstream
  description: Secure remote secrets storage with OPAQUE PAKE authentication, email/password registration, MFA login, and automatic ducklake mounting
  version: 0.4.0
  language: C++, Rust
  build: cmake
  license: MIT
  maintainers:
    - dforsber
  requires_toolchains: rust

repo:
  github: dforsber/boilstream-extension
  ref: 980fb47f9276c04c1aec04868f79974921e7488d

docs:
  hello_world: |
    -- Setup: Install and load boilstream extension
    INSTALL httpfs; LOAD httpfs;
    INSTALL boilstream FROM community;
    LOAD boilstream;

    -- Option 1: Login with email/password/MFA (establishes OPAQUE session)
    --     NOTE: Remember to clean up your ~/.duckdb/history
    PRAGMA boilstream_login('https://api.example.com/user@example.com', 'password', '123456');
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         status         â”‚     expires_at      â”‚ ducklakes_attached â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ Session token obtained â”‚ 2025-11-21 10:30:00 â”‚                  2 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    -- Option 2: Authenticate with bootstrap token (from SSO/web UI)
    PRAGMA boilstream_bootstrap_session('https://api.example.com/secrets:TOKEN');
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         status         â”‚     expires_at      â”‚ ducklakes_attached â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ Session token obtained â”‚ 2025-11-21 10:30:00 â”‚                  2 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    -- List all available ducklakes
    FROM boilstream_ducklakes();
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ catalog_id   â”‚ catalog_name â”‚   description   â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ 5a805647-... â”‚ my_analytics â”‚ Sales analytics â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    -- List all cached secrets with expiration
    FROM boilstream_secrets();
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚        name         â”‚   type   â”‚     expires_at      â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ my_analytics        â”‚ ducklake â”‚ 2026-11-19 20:00:00 â”‚
    â”‚ my_analytics_s3     â”‚ s3       â”‚ 2026-11-19 20:00:00 â”‚
    â”‚ my_analytics_pg     â”‚ postgres â”‚ 2026-11-19 20:00:00 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    -- Create new ducklake
    PRAGMA boilstream_create_ducklake('new_catalog', 'My new ducklake');

    -- Query ducklake (automatically attached)
    USE my_analytics;
    SHOW TABLES;

  extended_description: |
    Boilstream extension provides enterprise-grade remote secrets storage for multi-tenant DuckDB deployments.

    **Features:**
    - ğŸ” **OPAQUE PAKE Authentication** - Password-less authentication (IETF RFC 9807)
    - ğŸ”’ **End-to-end Encryption** - AES-256-GCM/ChaCha20-Poly1305 for secrets and responses
    - ğŸ”‘ **Cryptographic Key Derivation** - HKDF-SHA256 with domain separation
    - ğŸ›¡ï¸ **Defense in Depth** - HMAC verification before AEAD decryption
    - ğŸ¯ **Session Protection** - Lock-step sequence protocol prevents hijacking
    - ğŸ—„ï¸ **Ducklake Support** - Auto-attach multi-tenant data catalogs
    - ğŸŒ **SSO Integration** - Bootstrap token exchange for web environments

    **Security:**
    - Facebook's audited OPAQUE implementation (Rust + C++ FFI)
    - Protects against MITM attacks even if TLS is compromised
    - One-time bootstrap tokens with anonymous authentication
    - Session resumption with encrypted refresh tokens
    - Comprehensive test vectors and security specification

    **API Functions:**
    - `PRAGMA boilstream_register_user(url_with_email, password)` - Register new user with MFA (displays QR code)
    - `PRAGMA boilstream_verify_mfa(totp_code)` - Complete registration and get backup codes
    - `PRAGMA boilstream_login(url_with_email, password, mfa_code)` - Email/password/MFA login
    - `PRAGMA boilstream_bootstrap_session(url_with_token)` - Authenticate with bootstrap token
    - `boilstream_ducklakes()` - List available ducklakes
    - `boilstream_secrets()` - List cached secrets with expiration
    - `PRAGMA boilstream_create_ducklake(name, description)` - Create new ducklake
    - `PRAGMA boilstream_help` - Show all available commands

    **Requirements:**
    - httpfs extension (auto-loaded)
    - postgres_scanner extension (auto-loaded)
    - ducklake extension (auto-loaded)
    - Compatible REST API server (see [API specification](https://github.com/dforsber/boilstream-extension/blob/main/src/README.md))

    For detailed documentation, security specification, and setup instructions, visit the [extension repository](https://github.com/dforsber/boilstream-extension).
