extension:
  name: anndata
  description: Read AnnData (.h5ad) files for single-cell genomics data analysis, with support for local and remote (HTTP/HTTPS/S3) files
  version: 0.13.3
  language: C++
  build: cmake
  license: MIT
  maintainers:
    - honicky

repo:
  github: honicky/anndata-duckdb-extension
  ref: e15dd151b1ec85661f93cee146bd27bad8c00caa

docs:
  hello_world: |
    -- Attach an AnnData file
    ATTACH 'data.h5ad' AS scdata (TYPE ANNDATA);

    -- Query cell metadata
    SELECT * FROM scdata.obs LIMIT 10;

    -- Query gene metadata
    SELECT * FROM scdata.var LIMIT 10;

    -- Query expression matrix
    SELECT * FROM scdata.X LIMIT 10;

    -- Detach when done
    DETACH scdata;

  extended_description: |
    The AnnData extension provides read-only access to AnnData (.h5ad) files,
    the standard format for single-cell genomics data.

    ## ATTACH Syntax

    ```sql
    -- Local file
    ATTACH 'file.h5ad' AS name (TYPE ANNDATA);

    -- Remote file via HTTPS
    ATTACH 'https://example.com/data.h5ad' AS name (TYPE ANNDATA);

    -- S3 file (requires httpfs extension and credentials)
    INSTALL httpfs;
    LOAD httpfs;
    CREATE SECRET s3_secret (TYPE S3, KEY_ID 'xxx', SECRET 'xxx', REGION 'us-east-1');
    ATTACH 's3://bucket/data.h5ad' AS name (TYPE ANNDATA);

    -- With custom gene name/ID columns
    ATTACH 'file.h5ad' AS name (TYPE ANNDATA, VAR_NAME_COLUMN 'gene_symbols', VAR_ID_COLUMN 'ensembl_id');
    ```

    ## Available Tables

    - `obs` - Observation (cell) metadata
    - `var` - Variable (gene) metadata
    - `X` - Expression matrix (genes as columns)
    - `obsm_*` - Dimensional reductions (PCA, UMAP, etc.)
    - `varm_*` - Variable embeddings
    - `layers_*` - Alternative expression matrices
    - `obsp_*` - Cell-cell pairwise matrices
    - `varp_*` - Gene-gene pairwise matrices
    - `uns` - Unstructured metadata

    ## Table Functions

    ```sql
    -- Core data
    SELECT * FROM anndata_scan_obs('file.h5ad');
    SELECT * FROM anndata_scan_var('file.h5ad');
    SELECT * FROM anndata_scan_x('file.h5ad');

    -- Dimensional reductions
    SELECT * FROM anndata_scan_obsm('file.h5ad', 'X_pca');
    SELECT * FROM anndata_scan_obsm('file.h5ad', 'X_umap');

    -- Layers
    SELECT * FROM anndata_scan_layers('file.h5ad', 'raw');

    -- File info
    SELECT * FROM anndata_info('file.h5ad');
    ```
