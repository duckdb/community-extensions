extension:
  name: scalarfs
  description: A collection of virtual filesystems for working with scalars
  version: 1.1.0
  language: C++
  build: cmake
  license: MIT
  maintainers:
    - teaguesterling

repo:
  github: teaguesterling/duckdb_scalarfs
  ref: "e69f7ad31076d53a0a2d741f6fb42e9915617050"

docs:
  hello_world: |
    LOAD scalarfs;

    -- Read JSON from a variable
    SET VARIABLE config = '{"debug": true, "port": 8080}';
    SELECT * FROM read_json('variable:config');

    -- Read CSV from inline content
    SELECT * FROM read_csv('data+varchar:name,score
    Alice,95
    Bob,87');

    -- Use a file path stored in a variable
    SET VARIABLE data_path = '/data/reports/monthly.csv';
    SELECT * FROM read_csv('pathvariable:data_path');

    -- Write query results to a variable
    COPY (SELECT * FROM my_table WHERE active) TO 'variable:exported' (FORMAT json);
    SELECT getvariable('exported');

  extended_description: |
    DuckDB's file functions (read_csv, read_json, COPY TO, etc.) expect file paths. scalarfs bridges the gap
    when your content is already in memory, allowing the same functions to work with:

    Variables — Store data in DuckDB variables and read/write them as files
    Path Variables — Use file paths stored in variables for dynamic file resolution
    Inline literals — Embed content directly in your queries without temporary files

    | Protocol       | Purpose                                |   Mode     |
    |----------------|----------------------------------------|------------|
    | variable:      | DuckDB variable as file                | Read/Write |
    | pathvariable:  | File path stored in variable           | Read/Write |
    | data:          | RFC 2397 data URI (base64/url-encoded) | Read       |
    | data+varchar:  | Raw VARCHAR content as file            | Read       |
    | data+blob:     | Escaped BLOB content as file           | Read       |

    For full documentation, see: https://scalarfs.readthedocs.io/

    **Note**: This extension was written primarily using Claude and Claude Code as an exercise in AI-driven development.
