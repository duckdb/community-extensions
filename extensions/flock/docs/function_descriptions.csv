function,description,comment,example
llm_complete,Generates text completions using a specified language model,Requires model config and prompt; supports text and image inputs,"SELECT llm_complete({'model_name': 'gpt-4o'}, {'prompt': 'Explain the purpose of Flock.'});"
llm_filter,Filters data based on language model evaluations returning boolean values,Commonly used in WHERE clause; supports text and image inputs,"SELECT * FROM data WHERE llm_filter({'model_name': 'gpt-4o'}, {'prompt': 'Is this eco-friendly?', 'context_columns': [{'data': content}]});"
llm_embedding,Generates embeddings for input text,Useful for semantic similarity; text only (no image support),"SELECT llm_embedding({'model_name': 'text-embedding-3-small'}, {'context_columns': [{'data': product_name}]}) FROM products;"
llm_reduce,Aggregates multiple inputs into a single output using a language model,Use with GROUP BY; summarizes or combines multiple rows,"SELECT category, llm_reduce({'model_name': 'gpt-4o'}, {'prompt': 'Summarize the following', 'context_columns': [{'data': content}]}) FROM documents GROUP BY category;"
llm_rerank,Reorders query results based on relevance scores from a language model,Uses sliding window for long lists; returns JSON array of reranked rows,"SELECT llm_rerank({'model_name': 'gpt-4o'}, {'prompt': 'AI and machine learning', 'context_columns': [{'data': document_title}, {'data': document_content}]}) FROM search_results;"
llm_first,Selects the top-ranked result after reranking by relevance,Returns single JSON object; use with or without GROUP BY,"SELECT llm_first({'model_name': 'gpt-4o'}, {'prompt': 'high-performance computing', 'context_columns': [{'data': product_name}, {'data': product_description}]}) FROM products;"
llm_last,Selects the bottom-ranked result after reranking by relevance,Returns single JSON object; use with or without GROUP BY,"SELECT llm_last({'model_name': 'gpt-4o'}, {'prompt': 'premium audio quality', 'context_columns': [{'data': product_name}, {'data': product_description}]}) FROM products;"
fusion_rrf,Implements Reciprocal Rank Fusion (RRF) to combine rankings,Input: document ranks (1 = best); use DENSE_RANK() for rank-based input,"SELECT fusion_rrf(bm25_rank, embedding_rank) AS combined_score FROM ranked_results;"
fusion_combsum,Sums normalized scores from different scoring systems,Input: normalized scores (0-1); NULL/NaN/0 treated as 0,"SELECT fusion_combsum(bm25_normalized, embedding_normalized) FROM combined_scores;"
fusion_combmnz,Sums normalized scores multiplied by hit count,Enhances impact of frequently occurring items across scoring systems,"SELECT fusion_combmnz(score1, score2) FROM combined_scores;"
fusion_combmed,Computes the median of normalized scores,Reduces effect of outliers in combined scores,"SELECT fusion_combmed(score1, score2) FROM combined_scores;"
fusion_combanz,Calculates the average of normalized scores,Provides balanced aggregation of scores; NULL/NaN/0 treated as 0,"SELECT fusion_combanz(score1, score2) FROM combined_scores;"
flock_get_metrics,Returns usage metrics for LLM function calls in the current session,Returns JSON with api_calls tokens and timing per function,"SELECT flock_get_metrics();"
flock_get_debug_metrics,Returns detailed debug metrics including registration order,Useful for debugging multi-function queries,"SELECT flock_get_debug_metrics();"
flock_reset_metrics,Resets all metrics for the current session,Returns confirmation message,"SELECT flock_reset_metrics();"
