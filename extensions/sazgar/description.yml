extension:
  name: sazgar
  description: "System monitoring & intelligent SQL routing - 25+ table functions for CPU, memory, disk, network, processes, ports, Docker, GPU. Route queries to PostgreSQL, MySQL, ClickHouse with auto dialect translation."
  version: 1.0.0
  language: Rust
  build: cargo
  license: MIT
  excluded_platforms: "wasm_mvp;wasm_eh;wasm_threads;windows_amd64_rtools;windows_amd64_mingw;linux_amd64_musl"
  requires_toolchains: "rust;python3"
  maintainers:
    - Angelerator

repo:
  github: Angelerator/Sazgar
  ref: c4497a928b7903cf4d6d9a59010515db0f8b1a01

docs:
  hello_world: |
    -- System monitoring
    SELECT * FROM sazgar_memory(unit := 'GB');
    SELECT * FROM sazgar_cpu();
    SELECT * FROM sazgar_load();
    SELECT * FROM sazgar_disks(unit := 'GB');

    -- Query routing (v1.0.0: returns actual data!)
    SELECT * FROM sazgar_target('mydb', 'host=myserver port=5432 user=admin password=*** dbname=analytics');
    SELECT * FROM sazgar_route(
      '',
      'mydb',
      'TRUE',
      'SELECT id, name, amount FROM orders LIMIT 100'
    );
    -- Returns 100 rows with id, name, amount columns!
  extended_description: |
    Sazgar (Persian: سازگار, meaning "compatible/harmonious") is a comprehensive DuckDB extension for system monitoring and intelligent SQL query routing.

    **System Monitoring (25+ functions):**
    - `sazgar_system()` - Complete system overview
    - `sazgar_memory(unit)` - RAM usage with unit conversion
    - `sazgar_cpu()` - CPU information per core
    - `sazgar_disks(unit)` - Disk usage and space
    - `sazgar_network()` - Network interface statistics
    - `sazgar_processes()` - Running processes
    - `sazgar_ports(filter)` - Open network ports (Linux/macOS)
    - `sazgar_docker()` - Docker containers
    - `sazgar_services()` - System services (systemd/launchctl)
    - `sazgar_load()` - System load averages
    - `sazgar_gpu()` - NVIDIA GPU info (optional)
    - `sazgar_uptime()`, `sazgar_users()`, `sazgar_environment()`, and more...

    **Intelligent SQL Routing (v1.0.0 - EXECUTES & RETURNS DATA):**
    - `sazgar_target(name, connection_string)` - Register named database targets
    - `sazgar_route(query, target, condition, remote_query)` - Execute query on remote DB, return actual data
    - Connects to PostgreSQL-compatible databases (PostgreSQL, Tavana, DuckDB servers)
    - Dynamic schema discovery - returns columns from your query
    - Uses text protocol for maximum compatibility
    - Optional SQL dialect translation via SQLGlot (DuckDB → MySQL/ClickHouse)

    **Unit conversion:** bytes, KB, KiB, MB, MiB, GB, GiB, TB, TiB

    **Cross-platform:** Linux, macOS, Windows | **Pure Rust**
